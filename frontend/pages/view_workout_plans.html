<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>View Workout Plans</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f9;
        margin: 0;
        padding: 0;
    }
    .container {
        width: 90%;
        max-width: 900px;
        margin: 40px auto;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
        text-align: center;
        margin-bottom: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        font-size: 14px;
    }
    th {
        background: #007bff;
        color: #fff;
    }
    tr:hover {
        background: #f1f1f1;
    }
    .btn-back {
        display: inline-block;
        margin-bottom: 20px;
        text-decoration: none;
        color: #007bff;
        font-size: 14px;
    }
</style>
</head>
<body>

<div class="container">
    <a href="/pages/coach_dashboard.html" class="btn-back">‚Üê Back to Dashboard</a>
    <h2>Workout Plans</h2>

    <table id="plansTable">
        <thead>
            <tr>
                <th>Client Name</th>
                <th>Client ID</th>
                <th>Warmup</th>
                <th>Workout</th>
                <th>Cooldown</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
async function loadPlans() {
    try {
        const response = await fetch("/coach/view_workout_plans");
        const result = await response.json();

        const tbody = document.querySelector("#plansTable tbody");
        tbody.innerHTML = "";

        if (result.success && result.plans.length > 0) {
            result.plans.forEach(plan => {
                const workout = plan.workout_plan || {warmup:"", workout:"", cooldown:""};
                const row = `
                    <tr>
                        <td>${plan.client_name}</td>
                        <td>${plan.client_id}</td>
                        <td>${workout.warmup}</td>
                        <td>${workout.workout}</td>
                        <td>${workout.cooldown}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        } else {
            tbody.innerHTML = `<tr><td colspan="5">No workout plans found.</td></tr>`;
        }
    } catch (error) {
        alert("Error loading workout plans.");
        console.error(error);
    }
}

loadPlans();
</script>

</body>
</html>
